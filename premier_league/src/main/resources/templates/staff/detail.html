<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      th:replace="layout :: layout('Chi tiết nhân viên', 'staffs', ~{::content})">

<th:block th:fragment="content">

  <style>
    :root { --pl-purple: #38003c; --pl-pink: #ff0050; }
    .card-profile { border: none; border-radius: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.05); background: #fff; overflow: hidden; }
    .profile-img { width: 100%; height: 300px; object-fit: cover; object-position: top; }
    .btn-edit { background: var(--pl-purple); color: white; } .btn-edit:hover { background: #2a002d; color: white; }
    .btn-delete { background: #fee2e2; color: #dc2626; } .btn-delete:hover { background: #fecaca; color: #b91c1c; }
  </style>

  <div class="container-fluid">
    <div class="mb-4">
      <a href="/admin/staffs" class="text-decoration-none text-muted fw-bold small">
        <i class="bi bi-arrow-left me-1"></i> Quay lại danh sách
      </a>
    </div>

    <div class="row g-4">
      <div class="col-lg-4">
        <div class="card card-profile h-100">
          <img class="profile-img" th:src="${staff.avatarUrl}" alt="avatar"
               onerror="this.onerror=null; this.src='https://via.placeholder.com/400x400?text=No+Image';">

          <div class="card-body text-center p-4">
            <h3 class="fw-bold text-dark mb-1" th:text="${staff.fullName}">Full Name</h3>
            <span class="badge bg-info-subtle text-info-emphasis rounded-pill px-3 py-2 mb-3" th:text="${staff.role}">Role</span>

            <div class="d-flex justify-content-center gap-2 mt-2">
              <a th:href="@{'/admin/staffs/update/' + ${staff.id}}" class="btn btn-edit px-4 py-2 rounded-3">
                <i class="bi bi-pencil-square me-2"></i>Sửa
              </a>
              <button type="button" class="btn btn-delete px-3 py-2 rounded-3"
                      data-bs-toggle="modal" data-bs-target="#deleteStaffModal">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </div>
          <div class="card-footer bg-white p-4 border-top">
            <div class="mb-2"><i class="bi bi-envelope me-2 text-muted"></i><span th:text="${staff.email}"></span></div>
            <div><i class="bi bi-telephone me-2 text-muted"></i><span th:text="${staff.phoneNumber}"></span></div>
          </div>
        </div>
      </div>

      <div class="col-lg-8">
        <div class="card card-profile p-4">
          <h5 class="fw-bold mb-4 pb-2 border-bottom" style="color: var(--pl-purple);">Thông tin chi tiết</h5>
          <div class="row g-4">
            <div class="col-md-6">
              <strong class="text-muted small text-uppercase">Ngày sinh</strong>
              <div th:text="${#temporals.format(staff.dateOfBirth, 'dd/MM/yyyy')}"></div>
            </div>
            <div class="col-md-6">
              <strong class="text-muted small text-uppercase">Giới tính</strong>
              <div th:text="${staff.gender}"></div>
            </div>
            <div class="col-md-6">
              <strong class="text-muted small text-uppercase">Quốc tịch</strong>
              <div th:text="${staff.nationality}"></div>
            </div>
            <div class="col-md-6">
              <strong class="text-muted small text-uppercase">Ngày gia nhập</strong>
              <div th:text="${#temporals.format(staff.joinDate, 'dd/MM/yyyy')}"></div>
            </div>
            <div class="col-md-6">
              <strong class="text-muted small text-uppercase">Vị trí</strong>
              <div class="text-primary fw-bold" th:text="${staff.position}"></div>
            </div>
            <div class="col-md-6">
              <strong class="text-muted small text-uppercase">Trạng thái</strong>
              <div><span class="badge bg-success" th:text="${staff.status}"></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="deleteStaffModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border-0 shadow-lg">
        <div class="modal-header text-white" style="background-color: var(--pl-purple);">
          <h5 class="modal-title fw-bold">Xác nhận xóa</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body p-4 text-center">
          <p>Bạn có chắc chắn muốn xóa nhân viên <strong th:text="${staff.fullName}"></strong>?</p>
        </div>
        <div class="modal-footer justify-content-center border-0">
          <button type="button" class="btn btn-light" data-bs-dismiss="modal">Hủy</button>
          <form th:action="@{'/admin/staffs/delete/' + ${staff.id}}" method="post">
            <button type="submit" class="btn btn-danger fw-bold">Xóa ngay</button>
          </form>
        </div>
      </div>
    </div>
  </div>

</th:block>
</html>